<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Beanions</title>
    <link rel="stylesheet" th:href="@{../css/default.css}"/>
    <link rel="stylesheet" th:href="@{../css/admin/common.css}">
    <script>
        const successMessage = `[[${ successMessage }]]`;
        if (successMessage) {
            alert(successMessage);
        }
    </script>
</head>
<body>
<div th:replace="admin/layout.html"></div>
<article style="margin-top: -800px; margin-left: 160px">
<h1>게시판 관리</h1>
    <form class="search_form">
        <div class="search_box">
            <input type="search" class="search_input" placeholder="검색어를 입력하세요">
            <span class="clear_btn"></span>
            <span class="search_btn"></span>
        </div>
    </form>
<table align="center" style="padding-top: 40px">
    <tr>
        <th>번호</th>
        <th>게시판</th>
        <th>분류</th>
        <th>제목</th>
        <th>작성자</th>
        <th>작성일</th>
        <th>비고</th>
        <th>관리</th>
    </tr>
    <tr th:each="post, i : ${ postList }">
        <td th:text="${i.index + 1}"></td>
        <td th:text="${ post.mainCategory }"></td>
        <td th:text="${ post.subCategory }"></td>
        <td>
            <a th:text="${post.postTitle}" th:href="@{/admin/post/detail(id=${post.postCode})}"></a>
        </td>
        <td th:text="${ post.member.nickname}"></td>
        <td th:text="${#dates.format(post.postDate, 'yyyy.MM.dd') }" ></td>
        <td>
            <span th:if="${ post.verifiedStatus == 'Y' }">승인</span>
            <span th:if="${ post.verifiedStatus == 'N' }">미승인</span>
        </td>
        <td>
            <button type="button" th:onclick="|location.href='@{/admin/post/update(id=${post.postCode})}'|">변경</button>
            <!--                <a th:href="@{/admin/post/delete(id=${post.postCode})}">삭제</a>-->
            <!--                <button type="button" onclick="deletePost">삭제</button>-->
            <form th:action="@{/admin/post/delete(id=${post.postCode})}" method="post">
                <button type="submit">삭제</button>
                <!--                    <input type="hidden" th:value="${post.postCode}" name="postCode">-->
                <!--                    <input type="submit" value="삭제">-->
            </form>
        </td>
    </tr>
</table>
<button>버튼</button>
    </article>

<!--<th:block layout:fragment="script">-->
    <script>
        // 검색시 x버튼
        const clearBtn = document.querySelector(".clear_btn");
        clearBtn.addEventListener("click", (e) => { //x버튼 클릭시
            e.currentTarget.parentNode.querySelector(".search_input").value = null; // 입력된 검색어 내용 null로 변경
            clearBtn.classList.remove("active"); // x버튼 비활성화
        });

        // 검색시 입력 내용 실시간 감지 & x버튼 활성/비활성화
        const searchInput = document.querySelector(".search_input");
        searchInput.addEventListener("input", (e) => {
            if (e.currentTarget.value.length > 0) {// 검색어입력내용의 길이가 0보다 큰 경우
                clearBtn.classList.add("active"); // x버튼 활성화
            } else if (e.currentTarget.value.length <= 0) { // 검색어입력내용의 길이가 0보다 작거나 같은 경우
                clearBtn.classList.remove("active");// x버튼 비활성화
            }
        });

    </script>
<!--</th:block>-->
</body>
</html>