<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/default.css}">
    <link rel="stylesheet" th:href="@{/css/user/common.css}">
    <link rel="stylesheet" th:href="@{/css/user/board/review.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <div th:each="yesin: ${ PostAndMemberDTO }">
        <title th:text="${yesin.postTitle}"></title>
    </div>
</head>
<body>
<div th:replace="user/layout/header.html"></div>
<div class="content">
    <article>
        <table>
            <div th:each="yesin: ${ PostAndMemberDTO }">
                <div class="category_data">
                    <p class="mainCategory" th:text="${yesin.mainCategory}"></p>
                    <p class="category_line">|</p>
                    <p class="subCategory" th:text=" ${yesin.subCategory}"></p>
                </div>
                <div class="title_status">
                    <p class="detail_title" th:text="${yesin.postTitle}"></p>
                    <p class="status" th:if="${yesin.reviewStatus.equals('승인')}">🤩모니터링 완료된 리뷰입니다.</p>
                    <p class="status" th:if="${yesin.reviewStatus.equals('미승인')}">👀모니터링 중인 리뷰입니다.</p>
                </div>
                <div class="nickname_date">
                    <p class="review_nickname" th:text="${yesin.member.nickname}"></p>
                    <p class="review_date" th:text="${ #dates.format(yesin.postDate, 'yyyy.MM.dd') }"></p>
                </div>
                <hr class="content_line">
                <p class="review_content" th:text="${yesin.postContext}"></p>
                <hr class="content_line">
                <div class="viewCount_buttons">
                    <p class="viewCount" th:text="|조회수 ${yesin.viewCount}|"></p>
                    <div class="detail_buttons">
                        <button class="detail_button" type="button" th:onclick="|location.href='@{/board/reviewModify(id=${yesin.postCode})}'|">수정하기</button>
                        <form th:action="@{/board/delete(id=${yesin.postCode})}" method="post">
                            <input type="hidden" th:value="${yesin.subCategory}" name="subCategory">
                            <input type="hidden" th:value="${yesin.postCode}" name="postCode">
                            <button class="detail_delete_button" type="submit">삭제하기</button>
                        </form>
                    </div>
                </div>
            </div>
        </table>
    </article>
</div>
<div th:replace="user/layout/footer.html"></div>

<script>
    //header sub menu 활성화
    const gnbMenu = document.querySelectorAll('.header_gnb > li > a');
    const subMenu = document.querySelectorAll('.sub_menu');
    gnbMenu.forEach(gnbmenu => {
        gnbmenu.addEventListener('mouseover', (e) => {
            e.currentTarget.nextElementSibling.classList.add("active");
        })
        gnbmenu.addEventListener('mouseout', (e) => {
            e.currentTarget.nextElementSibling.classList.remove("active");
        })
    });

    subMenu.forEach(submenu => {
        submenu.addEventListener('mouseover', (e) => {
            e.currentTarget.classList.add("active");
        })
        submenu.addEventListener('mouseout', (e) => {
            e.currentTarget.classList.remove("active");
        })
    })

    // 예리뷰 슬라이드
    const swiper = new Swiper('.swiper', {
        // Optional parameters
        direction: 'horizontal',
        loop: true,

        // If we need pagination
        pagination: {
            el: '.swiper-pagination',
        },

        // Navigation arrows
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    });
</script>
</body>
</html>